// out: foundation.css, compress: true
@import "normalize";
@import "color-scheme";

@page-width: 1200px;
@header-width: 300px;
@content-width: 850px;

@eye-catch-side: 130px;

@subject-font-size: 18px;
@standard-font-size: 14px;
@sub-font-size: 12px;
@toc-font-size: 11px;
@tiny-font-size: 10px;
@credit-font-size: 8px;
@icon-side: 16px;

@main-pane:   100;
@header-pane: 200;
@toc-pane:    300;

.disalbe-select() {
	user-select: none;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
}

// universal
body {
	color:          @key-tone;
	font-family:    Candara, Meiryo, sans-serif;
	font-size:      @standard-font-size;
	letter-spacing: 0.5px;
	line-height:    1.8;
	width:          @page-width;
}

::selection       { background: @selection-color; }
::-moz-selecttion { background: @selection-color; }

// primitive
a, a:visited {
	color:           @link-color;
	text-decoration: none;
}

a:hover {
	color: @accent-linkc-color;
}

p {
	margin: 0 0 10px 0;
}

strong {
	background-image:    url( "undermarker.png" );
	background-position: 0 90%;
	background-repeat:   repeat-x;
	font-weight:         normal;
}


table {
	border:       none;
	table-layout: fixed;
	font-size:    @sub-font-size;
	margin:       10px 10px 10px 20px;
	border-collapse: collapse;
}

// tbody tr:nth-child( 2n ) {
// 	background: @tableEvenBackground;
// }

th {
	background-color: @table-head;
	box-sizing:       border-box;
	border:           none;
	padding:          2px 10px;
}

td {
	border:           none;
	box-sizing:       border-box;
	border-bottom:    1px solid @tertiary-color;
	padding:          2px 10px;
	white-space:      nowrap;
	vertical-align:   top;
	&:last-child { white-space: normal; }
}

img {
	box-shadow: 1px 1px 2px fade( @BlackInk, 50% );
	&[data-fancybox] {
		cursor: pointer;
	}
}

hr {
	background-color: @tertiary-color;
	border:           none;
	margin:           3px 0;
	height:           2px;
	width:            100%;
	&.skip {
		background: none;
		height:     10px;
		margin:     0;
	}
}
ul {
	clear:       both;
	list-style:  none;
	margin-left: 15px;
	padding:     0;
	// ul { margin-left: 5px; }
	>li {
		// background: url("/images/basis/level1-list-icon.png") no-repeat 0 9px;
		padding-left: 15px;
	// 	ul>li {
	// 		background-image: url("/images/basis/level2-list-icon.png");
	// 		ul>li {
	// 			background-image: url("/images/basis/level3-list-icon.png");
	// 		}
	// 	}
	}
	&+p { margin-top: 10px; }
}

// layout
header {
	background-image:    url( "background.jpg" );
	background-position: top center;
	background-repeat:   no-repeat;
	background-size:     cover;
	color:               #ffffff;
	height:              100%;
	position:            fixed;
	width:               @header-width;
	z-index:             @header-pane;
}
	#header-content {
		display:      table;
		height:       100%;
		table-layout: fixed;
		width:        100%;
	}
		#header-content-inner {
			cursor:   pointer;
			height:   100%;
			overflow: auto;
		}
	#page-info {
		color:    #ffffff;
		display:  block;
		margin:   0;
		position: absolute;
		top:      45%;
		.disalbe-select();
		&:hover, &:visited { color: #ffffff; }
	}
	.page-headings {
		display:     block;
		font-weight: normal;
		text-align:  center;
		width:       @header-width;
	}
	#meta-info {
		font-size: @sub-font-size;
	}
	#major-title {
		font-size: @subject-font-size;
	}
	#title-divider {
		border-top: 1px solid @separator-color;
		margin:     0 auto;
		width:      50%;
	}
	#minor-title {
		font-size: @standard-font-size;
	}

article {
	overflow: hidden;
	:first-child { margin-top: 0; }
}

footer {
	font-size:  @sub-font-size;
	position:   absolute;
	text-align: center;
	top:        75%;
	ul {
		padding: 0;
		margin:  0;
		a, a:visited, a:hover { color: #ffffff; }
	}
		li {
			display: inline-block;
			padding: 0 10px;
			&:first-child {
				width: 100%;
			}
		}
}
	.basis-icon {
		background:     url( "basis-icons.png" ) no-repeat;
		display:        inline-block;
		font-size:      @sub-font-size;
		height:         @icon-side;
		line-height:    @sub-font-size;
		margin-right:   5px;
		vertical-align: text-bottom;
		width:          @icon-side;
		&.me { background-position: 0   0  ; }
		&.tw { background-position: 0 -16px; }
		&.gh { background-position: 0 -32px; }
		// &.wb { background-position: 0 -48px; }
		// &.wp { background-position: 0 -64px; }
		&.ex { background-position: 0 -80px; }
	}
#wo-credit {
	cursor:      default;
	font-size:   @credit-font-size;
	line-height: 1;
	text-align:  center;
	position:    absolute;
	bottom:      0;
	width:       100%;
}

main {
	margin-left: 350px;
	width:       @content-width;
	z-index:     @main-pane;
	a, a:visited {
		&[href^="http"]::after {
			content:        " ";
			background:     url( "basis-icons.png" ) no-repeat 0 -48px;
			display:        inline-block;
			font-size:      @sub-font-size;
			height:         @icon-side;
			line-height:    @sub-font-size;
			margin-left:    2px;
			vertical-align: text-bottom;
			width:          @icon-side;
		}
		&[href*="wikipedia"]::after {
			content:        " ";
			background:     url( "basis-icons.png" ) no-repeat 0 -64px;
			display:        inline-block;
			font-size:      @sub-font-size;
			height:         @icon-side;
			line-height:    @sub-font-size;
			margin-left:    2px;
			vertical-align: text-bottom;
			width:          @icon-side;
		}
		// 打ち消し処理
		// &[title="JavaScript charts"] {
		// 	padding-right: 0;
		// 	background: none;
		// }
	}
}

#main-inner {
	padding: 50px 0;
}

h3 { // head level-1
	border-bottom: 2px solid @secondary-color;
	font-size:     @subject-font-size;
	clear:         both;
	margin:        30px 0 10px 0;
}

h4 {
	// head level-2
	clear:     both;
	font-size: @standard-font-size;
	margin:    20px 0 0 0;
	width:     100%;
}

h5, h6 {
	// head level-3/x
	background:   url( "level5-head-icon.png" ) no-repeat 3px 5px;
	clear:        both;
	font-size:    @standard-font-size;
	margin:       20px 0 0 0;
	padding-left: 24px;
	width:        100%;
}

	blockquote {
		background: @quote-background;
		border-left: 4px solid @secondary-color;
		border-radius: 0 4px 4px 0;
		clear: both;
		margin: 25px 34px 25px 25px;
		padding: 20px 20px 5px 20px;
		hr { margin-bottom: 10px; }
		.ref {
			color: @sub-key-tone;
			margin: 10px 12px 0 0;
			text-align: right;
			font-size: @sub-font-size;
			line-height: 1.6;
			.cite {
				display: block;
				&::before { content: "― "; }
			}
			.origin {
				display: block;
				&::after { content: " より"; }
			}
			&.foreign {
				font-style: oblique;
				.cite {
					&::before {
						content: "by ";
						font-style: normal;
					}
				}
				.origin {
					&::before {
						content: "from ";
						font-style: normal;
					}
					&::after { content: ""; }
				}
			}
		}
	}
	.epigraph {
		border-left:   none;
		border-radius: 4px 0 0 4px;
		border-right:  4px solid @secondary-color;
		font-size:     @sub-font-size;
		margin:        0 -4px 25px 74px;
		padding:       15px 20px 10px 20px;
		text-align:    right;
		.ref { margin: 6px 0 0 0; }
	}

#disqus-space {
	clear:  both;
	margin: 100px auto 0 auto;
	width:  90%;
}
	#comment-attention {
		font-size: @tiny-font-size;
		border: 2px solid fade( @StrawberryPink, 50% );
		border-radius: 4px;
		padding: 2px 5px;
		width: 90%;
		margin: 0 auto;
		line-height: 1.3;
	}

#toc {
	font-size: @toc-font-size;
	opacity:   0.3;
	position:  fixed;
	right:     0;
	top:       70px;
	z-index:   @toc-pane;
	.disalbe-select();
	&:hover {
		opacity:            1;
		transition:         opacity 0.2s linear;
		-webkit-transition: opacity 0.2s linear;
		-moz-transition:    opacity 0.2s linear;
		-o-transition:      opacity 0.2s linear;
	}
	a {
		background:    @toc-major;
		border-radius: 3px 0 0 3px;
		color:         @key-tone;
		padding:       1px 3px 1px 5px;
		&:hover {
			font-weight:   bold;
			padding-right: 20px;
		}
	}
	ul { margin: 0; }
	li {
		display:       block;
		margin-bottom: 5px;
		text-align:    right;
	}
	ul ul li {
		margin-bottom: 0;
		a { background: @toc-minor; }
	}
	ul ul ul li {
		margin-bottom: 0;
		a { background: @toc-extend; }
	}
}

li#back2top {
	margin-bottom: 15px;
	a { background: @toc-meta; }
}

li#jump2disqus {
	margin-top: 15px;
	a { background: @toc-meta; }
}

//
// Wizardry Online
//
.wo-enemy, .wo-warn { color: @wo-enemy-color; }
.wo-item    { color: @wo-item-color;    }
.wo-gold    { color: @wo-gold-color;    }
.wo-keyword { color: @wo-keyword-color; }
.wo-name    { color: @wo-name-color;    }
.wo-site    { color: @wo-site-color;    }
.wo-law     { color: @wo-law-color;     }
.wo-neu     { color: @wo-neu-color;     }
.wo-cha     { color: @wo-cha-color;     }

.lore-wrapper {
	overflow: auto;
}
	.lore {
		float: left;
		width: 400px;
		margin-left: 20px;
	}

.enemies {
	width: 820px;
	img {
		border-radius: 4px;
		width:         100px;
	}
	td {
		vertical-align: middle;
	}
	td:first-child {
		padding: 15px;
	}
	.display,
	.literal {
		display: block;
	}
	.display {
		margin-bottom: 5px;
	}
	.syn {
		display:     block;
		font-size:   @tiny-font-size;
		line-height: 1;
	}
	.note {
		border-radius: 3px;
		color:         @sub-key-tone;
		font-size:     @tiny-font-size;
		line-height:   30px;
		padding-left:  5px;
		.indicate( @color ) {
			background: -webkit-radial-gradient( 0 0, circle, fade( @color, 25%) 0%, transparent 50%);
			background: -moz-radial-gradient( 0 0, circle, fade( @color, 25%) 0%, transparent 50%);
			background: -ms-radial-gradient( 0 0, circle, fade( @color, 25%) 0%, transparent 50%);
			background: radial-gradient( 0 0, circle, fade( @color, 25%) 0%, transparent 50%);
		}
		&.rare     { .indicate( @wo-rare-creature-color     ); }
		&.unique   { .indicate( @wo-unique-creature-color   ); }
		&.guardian { .indicate( @wo-guardian-creature-color ); }
	}
	// .codicil {
	// 	color:       @sub-key-tone;
	// 	display:     block;
	// 	font-size:   10px;
	// 	line-height: 1.5;
	// 	margin-top:  15px;
	// 	white-space: normal;
	// }
	th:nth-child( 1 ) { width: 130px; }
	th:nth-child( 2 ) { width: 220px; }
	th:nth-child( 3 ) { width: 470px; }
}

@dialogue-width: 800px;
@dialogue-text-area-width: 635px;
@dialogue-scripts-area-width: 580px;
@dialogue-screenshots-area-width: 180px;
@dialogue-direction-area-width: 400px;

.dialogue-factory( @ribbon ) {
	box-sizing:    border-box;
	background:    @quote-background;
	border-top:    4px solid @ribbon;
	border-radius: 0 0 4px 4px;
	clear:         both;
	float:         left;
	font-size:     @sub-font-size;
	margin:        30px 34px 25px 25px;
	overflow:      visible;
	padding:       10px 20px 5px 15px;
	position:      relative;
	counter-reset: note;
	width:         @dialogue-width;
	p {
		box-sizing: border-box;
		margin: 0 0 0 5px;
	}
	.header {
		left:     0;
		top:      -27px;
		position: absolute;
		width:    100%;
		span { display: block; }
	}
	.descriptive {
		background:    @quote-background;
		border-radius: 4px;
		margin:        10px 0 10px 25px;
		padding:       5px 20px 5px 20px;
		width:         @dialogue-direction-area-width;
	}
	.footer {
		clear:       both;
		color:       @sub-key-tone;
		font-size:   @tiny-font-size;
		line-height: 1.3;
		margin:      0 0 5px 0;
		overflow:    hidden;
		span {
			display:     block;
			float:       right;
			margin-left: 3px;
		}
	}
}

.dialogue-header-primary() {
	float:       left;
	font-size:   @standard-font-size;
	margin-left: 10px;
}

.dialogue-header-secondary() {
	float:        right;
	font-size:    @tiny-font-size;
	margin-top:   6px;
	margin-right: 8px;
}

.tag-factory( @color ) {
	display:      inline-block;
	font-size:    @sub-font-size;
	font-weight:  normal;
	margin-right: 3px;
	span {
		background:    fade( @color, 20% );
		border-radius: 3px;
		color:         @key-tone;
		padding:       0 5px;
	}
}

.require-factory( @label ) {
	display: inline;
	&::before {
		content: @label;
	}
	&::after {
		content: "";
		padding-right: 10px;
	}
}
.tag { .tag-factory( @ParrotGreen ); }
.var { .tag-factory( @AzaleaPink  ); }

.lines {
	.dialogue-factory( @secondary-color );
	.character { .dialogue-header-primary();   }
	.race      { .dialogue-header-secondary(); }

	// .header .footnote {
	// 	border-bottom: none;
	// }
	.text {
		float: left;
		margin-left: 5px;
		width: @dialogue-text-area-width;
	}
	.centering {
		text-align: center;
		width:      @dialogue-direction-area-width;
	}
	.headings {
		line-height: 3;
		.centering();
	}
	.facility {
		.centering();
		background:    @quote-background;
		border-radius: 4px;
		line-height:   1;
		margin:        10px 0;
		text-align:    center;
		padding:       12px 0;
		span {
			display: block;
			&:nth-child( 1) {
				font-weight: bold;
			}
			&:nth-child( 2) {
				display: block;
				font-size: @sub-font-size;
				&::before, &::after {
					content: "\"";
				}
			}
		}
	}
	// .attention {
	// 	background:    @attention-background;
	// 	border-radius: 4px;
	// 	margin:        10px 0;
	// 	padding:       5px 20px 5px 20px;
	// }
	// .types {
	// 	background:    @quote-background;
	// 	border-radius: 4px;
	// 	margin:        10px 0;
	// 	padding:       20px 0 20px 20px;
	// 	text-align:    center;
	// 	width:         @lines-direction-area-width;
	// }
	.textbox {
		display: block;
		width:   570px;
		float:   right;
	}
	// hr {
	// 	background-color: @divider-color;
	// 	margin:           3px 0;
	// 	height:           2px;
	// 	width:            100%;
	// 	&.skip {
	// 		background: none;
	// 		height:     10px;
	// 		margin:     0;
	// 	}
	// }
	div.option {
		&+div.option {
			margin-top: 15px;
		}
	}
	span.option {
		border-bottom: 2px solid fade( @CadmiumOrange, 25% );
		font-weight:   bold;
		display:       block;
		line-height:   1.4;
		margin-bottom: 3px;
		overflow:      hidden;
		padding-left:  5px;
		width:         100%;
	}
	span.dialog {
		display:     block;
		font-weight: bold;
		line-height: 1.4;
		margin-top:  10px;
	}
	.branch( @guage ) {
		clear: both;
		margin-top: 8px;
		margin-bottom: 8px;
		padding-left: 20px;
		position: relative;
		&>.gauge {
			background: fade( @guage, 25%);
			border-radius: 3px;
			display: block;
			height: 100%;
			left: 6px;
			position: absolute;
			top: 0;
			width: 6px;
		}
	}
	.append  { .branch( @AzaleaPink    ); }
	.either  { .branch( @ParrotGreen   ); }
	.options { .branch( @CadmiumOrange ); }

	.effective { color: @sub-key-tone; }
	.positive  { color: @wo-positive-effect-color; }
	.negative  { color: @wo-negative-effect-color; }
	.buff      { color: @wo-buff-color; }
	.debuff    { color: @wo-debuff-color; }

	.figure {
		float:  right;
		margin: 0 0 15px 0;
		img {
			box-shadow:    none;
			border-radius: 2px;
			max-width:     100px;
		}
	}
	.footer span  {
		text-align: right;
		width:      100%;
	}
}

.quest {
	.dialogue-factory( @primary-color );
	.title  {
		.dialogue-header-primary();
		.soulrank { .require-factory( "SR ");  }
		.level    { .require-factory( "Lv. "); }
	}
	.client {
		.dialogue-header-secondary();
		.wo-name { display: inline; }
		&::before { content: "依頼者："; }
	}
	.label {
		display:     block;
		font-weight: bold;
		margin:      10px 0 0 10px;
	}
	.header+.label      { margin-top: 0; }
	.text p, .objective { margin-left: 20px; }
	.task {
		display: block;
		:first-child {
			color:      @sub-key-tone;
			display:    inline-block;
			margin-left: 20px;
			width:       230px;
		}
		:last-child {
			display:    inline-block;
			text-align: right;
			width:      40px;
		}
	}
	.rewards {
		.rewards-factory() {
			display:    inline-block;
			margin:     0 20px;
			text-align: right;
			width:      150px;
			&::before {
				display:    block;
				float:      left;
				text-align: left;
			}
		}
		.exp {
			.rewards-factory();
			&::before { content: "経験値： "; }
			&::after  { content: " exp";     }
		}
		.price {
			.rewards-factory();
			&::before { content: "賞金： "; }
			&::after  { content: " G";     }
		}
	}
	.reward-item-factory() {
		display:     block;
		margin-left: 20px;
		line-height: 32px;
	}
	.items {
		.reward-item-factory();
		&::before {
			content:    "アイテム： ";
			display:    block;
			float:      left;
			text-align: left;
		}
	}
	.choices {
		.reward-item-factory();
	}
	.reward-item, .choice-item {
		box-sizing:    border-box;
		display:       inline-block;
		overflow:      hidden;
		padding-right: 5px;
		text-overflow: ellipsis;
		white-space:   nowrap;
		width:         180px;
		img {
			box-shadow:     none;
			height:         24px;
			margin-right:   5px;
			vertical-align: -7px;
			width:          24px;
		}
	}
	.footer span {
		&::before { content: "["; }
		&::after  { content: "]"; }
		&.time-limit::before { content: "[time limit: "; }
	}
}

.movie {
	.dialogue-factory( @secondary-color );
	.title { .dialogue-header-primary() }
	.scripts {
		float: left;
		width: @dialogue-scripts-area-width;
		p { margin-left: 10px; }
		.speaker {
			color:       @wo-name-color;
			display:     block;
			font-weight: bold;
			&::after { content: "："; }
		}
		// .types {
		// 	background: @quote-background;
		// 	border-radius: 4px;
		// 	margin: 10px 0;
		// 	padding: 20px 0 20px 20px;
		// 	text-align: center;
		// 	width: 350px;
		// }
		// .centering {
		// 	display: block;
		// 	line-height: 3;
		// 	text-align: center;
		// 	width: 350px;
		// }
		// .descriptive {
		// 	margin: 10px 0;
		// 	padding: 5px 0 5px 20px;
		// 	width: 350px;
		// }
	}
	.screenshots {
		float:  right;
		margin: 0 0 15px 0;
		width:  @dialogue-screenshots-area-width;
		img {
			box-shadow:    none;
			margin-bottom: 5px;
			max-width: @dialogue-screenshots-area-width;
		}
	}
	.footer .flag {
		&::before { content: "["; }
		&::after  { content: "]"; }
	}
}

// .comment {
// 	clear: both;
// 	float: left;
// 	margin: 15px 20px;
// 	width: 350px;
// }

// .skip {
// 	display: block;
// 	height: 1em;
// }

// article>.screenshots {
// 	margin: 15px 34px 5px 25px;
// }

// footnote suite
span.footnote {
	border-bottom: 1px solid @primary-color;
	&::after {
		content:           "*" counter( note );
		counter-increment: note;
		font-size:         @tiny-font-size;
		font-weight:       normal;
		padding-right:     3px;
		vertical-align:    super;
	}
	&:empty { border: none; }
}

span.manual-footnote {
	font-size:      @tiny-font-size;
	font-weight:    normal;
	padding-right:  3px;
	vertical-align: super;
}

hr.footnote {
	width:      306px; // (φ) : 494 + 306 = 800
	height:     1px;
	margin:     15px 0 10px 0;
	background: @tertiary-color;
}

ul.footnote {
	counter-reset: footnote;
	margin:        0 0 0 5px;
	&>li {
		background:   none;
		color:        @sub-key-tone;
		padding-left: 0;
		&::before {
			content:           "*" counter( footnote );
			counter-increment: footnote;
			font-size:         @tiny-font-size;
			margin-right:      5px;
		}
		a, a:visited {
			color:      inherit;
			transition: 0.3s;
			&:hover { color: @link-color; }
		}
	}
}
